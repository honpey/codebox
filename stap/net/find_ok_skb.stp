probe begin {
    printf("Begin\n")
}

global do = 0
probe kernel.statement("*@net/ipv4/tcp.c:1659") {
    lastSeq = ($seq)[0]
//    thisSeq = @cast($skb->cb, "tcp_skb_cb")->seq
 //   printf("offset(%d) PreSeq(%d) PosSeq(%d)\n", lastSeq-thisSeq, lastSeq, thisSeq)
    printf("%s %lx:%d\n", execname(), $sk, lastSeq)
    do = 1
}

probe kernel.function("skb_copy_datagram_iter") {
    if (do == 1) {
    thisSeq = @cast($skb->cb, "tcp_skb_cb")->seq
    printf("curSeq: %d offset(%d)\n\n\n", thisSeq, $offset)
    do = 0
    }

}

probe end {
    printf("End\n")
}
